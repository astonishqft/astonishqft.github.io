(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[2],{"6S3V":function(e,a,t){"use strict";t.r(a);t("Telt");var n,r,i,s=t("Tckk"),l=(t("Mwp2"),t("VXEj")),c=(t("i5XK"),t("jq9l")),o=(t("5Dmo"),t("3S7+")),m=(t("Pwec"),t("CtXQ")),u=(t("+L6B"),t("2/Rp")),d=(t("y8nQ"),t("Vl3Y")),h=(t("5NDa"),t("5rEg")),p=t("q1tI"),g=t.n(p),y=t("/MKj"),E=t("wd/R"),k=t.n(E),v=t("XlMv"),b=t("i+bE"),f=t.n(b),C=h["a"].TextArea,L=e=>{var a=e.onChange,t=e.onSubmit,n=e.submitting,r=e.value;return g.a.createElement("div",null,g.a.createElement(d["a"].Item,null,g.a.createElement(C,{rows:4,onChange:a,value:r})),g.a.createElement(d["a"].Item,null,g.a.createElement(u["a"],{htmlType:"submit",loading:n,onClick:t,type:"primary"},"Add Comment")))},w=(n=Object(y["c"])(e=>{var a=e.home,t=e.user;return{home:a,user:t}}),n((i=class extends p["Component"]{constructor(e){super(e),this.state={content:"",value:"",detail:"",commentList:[],action:null},this.handleSubmit=(()=>{var e=this.props.dispatch,a=this.state.value;a&&e({type:"home/createComment",payload:{id:this.id,value:a}})}),this.handleChange=(e=>{this.setState({value:e.target.value})}),this.formatTime=(e=>{return g.a.createElement("span",null,"\u53d1\u8868\u4e8e",g.a.createElement("span",null,k()(e).fromNow()))}),this.handleReaction=((e,a)=>{var t=this.props.dispatch;this.setState({action:"liked"}),t({type:"home/createReaction",payload:{commentId:e.id,issueId:this.id,type:a}})}),this.formatAction=(e=>{var a=e.reactions,t=void 0===a?{}:a;return[g.a.createElement("span",{key:"comment-basic-like"},g.a.createElement(o["a"],{title:"+1"},g.a.createElement(m["a"],{type:"like",onClick:()=>this.handleReaction(e,"+1")})),g.a.createElement("span",{style:{paddingLeft:8,cursor:"auto"}},t["+1"])),g.a.createElement("span",{key:' key="comment-basic-dislike"'},g.a.createElement(o["a"],{title:"-1"},g.a.createElement(m["a"],{type:"dislike",onClick:()=>this.handleReaction(e,"-1")})),g.a.createElement("span",{style:{paddingLeft:8,cursor:"auto"}},t["-1"])),g.a.createElement("span",{key:' key="comment-basic-heart"'},g.a.createElement(o["a"],{title:"Heart"},g.a.createElement(m["a"],{type:"heart",onClick:()=>this.handleReaction(e,"heart")})),g.a.createElement("span",{style:{paddingLeft:8,cursor:"auto"}},t["heart"])),g.a.createElement("span",{key:' key="comment-basic-rocket"'},g.a.createElement(o["a"],{title:"Rocket"},g.a.createElement(m["a"],{type:"rocket",onClick:()=>this.handleReaction(e,"rocket")})),g.a.createElement("span",{style:{paddingLeft:8,cursor:"auto"}},t["rocket"])),g.a.createElement("span",{key:' key="comment-basic-laugh"'},g.a.createElement(o["a"],{title:"Laugh"},g.a.createElement(m["a"],{type:"smile",onClick:()=>this.handleReaction(e,"laugh")})),g.a.createElement("span",{style:{paddingLeft:8,cursor:"auto"}},t["laugh"])),g.a.createElement("span",{key:' key="comment-basic-confused"'},g.a.createElement(o["a"],{title:"Confused"},g.a.createElement(m["a"],{type:"frown",onClick:()=>this.handleReaction(e,"confused")})),g.a.createElement("span",{style:{paddingLeft:8,cursor:"auto"}},t["confused"])),g.a.createElement("span",{key:' key="comment-basic-eyes"'},g.a.createElement(o["a"],{title:"Eyes"},g.a.createElement(m["a"],{type:"eye",onClick:()=>this.handleReaction(e,"eyes")})),g.a.createElement("span",{style:{paddingLeft:8,cursor:"auto"}},t["eyes"])),g.a.createElement("span",{key:"comment-basic-reply-to"},"\u56de\u590d")]}),this.id=""}componentDidMount(){var e=this.props,a=e.match.params.id,t=e.dispatch;this.id=a,t({type:"home/getIssueDetail",payload:{id:a}}),t({type:"home/getCommentList",payload:{id:a}})}render(){var e=this.state.value,a=this.props,t=a.home,n=t.commentList,r=void 0===n?[]:n,i=t.issueDetail.body,o=void 0===i?"":i,m=a.user.userInfo,d=void 0===m?{}:m;return g.a.createElement("div",{className:f.a.detail},g.a.createElement(v["a"],{dataSource:o}),g.a.createElement(l["a"],{className:"comment-list",header:"".concat(r.length," replies"),itemLayout:"horizontal",dataSource:r,renderItem:e=>g.a.createElement("li",null,g.a.createElement(c["a"],{actions:this.formatAction(e),author:e.author_association,avatar:e.user.avatar_url,content:g.a.createElement(v["a"],{dataSource:e.body}),datetime:this.formatTime(e.updated_at)}))}),g.a.createElement(c["a"],{avatar:g.a.createElement(s["a"],{src:d.avatar_url?d.avatar_url:"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png",alt:"Han Solo"}),content:g.a.createElement(L,{onChange:this.handleChange,onSubmit:this.handleSubmit,submitting:this.submitting,value:e})}),g.a.createElement(u["a"],{onClick:()=>{window.location.href="https://github.com/login/oauth/authorize?client_id=Iv1.8fd715c6f01d9c3b&redirect_uri=http://localhost:8000"}},"Login with github"))}},r=i))||r);a["default"]=w},XlMv:function(e,a,t){"use strict";var n=t("q1tI"),r=t.n(n),i=t("IujW"),s=t.n(i),l=(t("17x9"),t("oSia")),c=t("w2d/"),o=t("dUOs"),m=t("Cuvq"),u=t("DqFP"),d=t("3W8J"),h=t("3cQg"),p=t("lxyc");class g extends n["PureComponent"]{componentDidMount(){l["a"].registerLanguage("jsx",o["a"]),l["a"].registerLanguage("javascript",m["a"]),l["a"].registerLanguage("sass",u["a"]),l["a"].registerLanguage("scss",d["a"]),l["a"].registerLanguage("less",h["a"]),l["a"].registerLanguage("css",p["a"])}render(){var e=this.props,a=e.language,t=e.value;return r.a.createElement("figure",{className:"highlight"},r.a.createElement(l["a"],{language:a,style:c["a"]},t))}}g.defaultProps={language:null};var y=g;t("5MvH"),t("qxIa"),a["a"]=(e=>{var a=e.dataSource;return r.a.createElement(s.a,{escapeHtml:!1,renderers:{code:y},className:"markdown-body",source:a})})},"i+bE":function(e,a,t){e.exports={detail:"detail___xbiEq"}},qxIa:function(e,a,t){e.exports={"markdown-body":"markdown-body___3ieAj"}}}]);