(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[2],{"6S3V":function(e,t,a){"use strict";a.r(t);a("Telt");var n,i,o,s=a("Tckk"),r=(a("Mwp2"),a("VXEj")),l=(a("i5XK"),a("jq9l")),c=(a("cWXX"),a("/ezw")),m=(a("+L6B"),a("2/Rp")),d=(a("y8nQ"),a("Vl3Y")),u=(a("5Dmo"),a("3S7+")),h=(a("Pwec"),a("CtXQ")),p=(a("miYZ"),a("tsqr")),g=(a("5NDa"),a("5rEg")),y=a("q1tI"),E=a.n(y),v=a("/MKj"),f=a("wd/R"),k=a.n(f),b=a("XlMv"),C=a("i+bE"),L=a.n(C),I=g["a"].TextArea,w=(n=Object(v["c"])(e=>{var t=e.home,a=e.user,n=e.loading;return{home:t,user:a,submitting:n.effects["home/createComment"],detailLoading:n.effects["home/getIssueDetail"],commentLoading:n.effects["home/getCommentList"]}}),n((o=class extends y["Component"]{constructor(e){super(e),this.state={content:"",comment:"",detail:"",commentList:[],action:null},this.handleSubmit=(()=>{var e=this.props.dispatch,t=this.state.comment;t&&e({type:"home/createComment",payload:{id:this.id,value:t}}).then(e=>{e&&this.setState({comment:""})})}),this.handleChange=(e=>{this.setState({comment:e.target.value})}),this.formatTime=(e=>{return E.a.createElement("span",null,"\u53d1\u8868\u4e8e",E.a.createElement("span",null,k()(e).fromNow()))}),this.handleReaction=((e,t)=>{var a=this.props,n=a.dispatch,i=a.user.userInfo,o=void 0===i?{}:i,s=o.isLogin;s?(this.setState({action:"liked"}),n({type:"home/createReaction",payload:{commentId:e.id,issueId:this.id,type:t}})):p["a"].info("\u8bf7\u5148\u4f7f\u7528github\u8d26\u53f7\u767b\u5f55\uff01")}),this.handleReply=(e=>{var t=this.props.user.userInfo.isLogin;if(t){var a=this.state.comment,n=e.body,i=n.split("\n");i.unshift("@".concat(e.user.login)),i=i.map(e=>"> ".concat(e)),i.push(""),i.push(""),a&&i.unshift(""),this.setState({comment:i.join("\n")},()=>{this.commentText.focus()})}else p["a"].info("\u8bf7\u5148\u4f7f\u7528github\u8d26\u53f7\u767b\u5f55\uff01")}),this.createReactionForIssue=(()=>{var e=this.props,t=e.dispatch,a=e.user.userInfo,n=void 0===a?{}:a,i=n.isLogin;i?t({type:"home/createReactionForIssue",payload:{id:this.id}}):p["a"].info("\u8bf7\u5148\u4f7f\u7528github\u8d26\u53f7\u767b\u5f55\uff01")}),this.formatAction=(e=>{var t=e.reactions,a=void 0===t?{}:t;return[E.a.createElement("span",{key:"comment-basic-like"},E.a.createElement(u["a"],{title:"+1"},E.a.createElement(h["a"],{type:"like",onClick:()=>this.handleReaction(e,"+1")})),E.a.createElement("span",{style:{paddingLeft:8,cursor:"auto"}},a["+1"])),E.a.createElement("span",{key:' key="comment-basic-dislike"'},E.a.createElement(u["a"],{title:"-1"},E.a.createElement(h["a"],{type:"dislike",onClick:()=>this.handleReaction(e,"-1")})),E.a.createElement("span",{style:{paddingLeft:8,cursor:"auto"}},a["-1"])),E.a.createElement("span",{key:' key="comment-basic-heart"'},E.a.createElement(u["a"],{title:"Heart"},E.a.createElement(h["a"],{type:"heart",onClick:()=>this.handleReaction(e,"heart")})),E.a.createElement("span",{style:{paddingLeft:8,cursor:"auto"}},a["heart"])),E.a.createElement("span",{key:' key="comment-basic-rocket"'},E.a.createElement(u["a"],{title:"Rocket"},E.a.createElement(h["a"],{type:"rocket",onClick:()=>this.handleReaction(e,"rocket")})),E.a.createElement("span",{style:{paddingLeft:8,cursor:"auto"}},a["rocket"])),E.a.createElement("span",{key:' key="comment-basic-laugh"'},E.a.createElement(u["a"],{title:"Laugh"},E.a.createElement(h["a"],{type:"smile",onClick:()=>this.handleReaction(e,"laugh")})),E.a.createElement("span",{style:{paddingLeft:8,cursor:"auto"}},a["laugh"])),E.a.createElement("span",{key:' key="comment-basic-confused"'},E.a.createElement(u["a"],{title:"Confused"},E.a.createElement(h["a"],{type:"frown",onClick:()=>this.handleReaction(e,"confused")})),E.a.createElement("span",{style:{paddingLeft:8,cursor:"auto"}},a["confused"])),E.a.createElement("span",{key:' key="comment-basic-eyes"'},E.a.createElement(u["a"],{title:"Eyes"},E.a.createElement(h["a"],{type:"eye",onClick:()=>this.handleReaction(e,"eyes")})),E.a.createElement("span",{style:{paddingLeft:8,cursor:"auto"}},a["eyes"])),E.a.createElement("span",{key:"comment-basic-reply-to",onClick:()=>this.handleReply(e)},"\u56de\u590d")]}),this.renderEditor=((e,t,a,n)=>E.a.createElement("div",null,E.a.createElement(d["a"].Item,null,E.a.createElement(I,{ref:e=>this.commentText=e,rows:4,onChange:e,value:n})),E.a.createElement(d["a"].Item,null,E.a.createElement(m["a"],{htmlType:"submit",loading:a,onClick:t,type:"primary",id:"commentContainer"},"\u6dfb\u52a0\u8bc4\u8bba")))),this.id="",this.commentText=null}componentDidMount(){var e=this.props,t=e.match.params.id,a=e.user.userInfo.isLogin,n=e.dispatch,i=e.location.query,o=void 0===i?{}:i;this.id=t,n({type:"home/getIssueDetail",payload:{id:t}}).then(()=>{if(o){var e=null;a?"like"===o.scroll&&(e=document.getElementById("likesContainer")):e=document.getElementById("loginContainer"),e&&e.scrollIntoView({block:"start",behavior:"smooth"})}}),n({type:"home/getCommentList",payload:{id:t}}).then(()=>{if(o){var e=null;a?"comment"===o.scroll&&(e=document.getElementById("commentContainer")):e=document.getElementById("loginContainer"),e&&e.scrollIntoView({block:"start",behavior:"smooth"})}}),n({type:"home/listReactionForAnIssue",payload:{id:t}})}render(){var e=this.state.comment,t=this.props,a=t.home,n=a.commentList,i=void 0===n?[]:n,o=a.issueDetail.body,d=void 0===o?"":o,u=a.likes,p=void 0===u?[]:u,g=t.user.userInfo,y=void 0===g?{}:g,v=t.submitting,f=void 0!==v&&v,k=t.detailLoading,C=void 0!==k&&k,I=t.commentLoading,w=void 0!==I&&I,_=!!y.isLogin;return E.a.createElement("div",{className:L.a.detail},E.a.createElement(c["a"],{loading:C,active:!0},E.a.createElement(b["a"],{dataSource:d}),E.a.createElement("div",{className:L.a.append,id:"likesContainer"},E.a.createElement(h["a"],{type:"like",theme:"twoTone",twoToneColor:"#eb2f96",onClick:this.createReactionForIssue}),E.a.createElement("span",{className:L.a.number},p.length))),E.a.createElement(c["a"],{loading:w,active:!0,avatar:!0},E.a.createElement(r["a"],{className:"comment-list",header:"\u5171".concat(i.length,"\u6761\u56de\u590d"),itemLayout:"horizontal",dataSource:i,renderItem:e=>E.a.createElement("li",null,E.a.createElement(l["a"],{actions:this.formatAction(e),author:e.author_association,avatar:e.user.avatar_url||"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png",content:E.a.createElement(b["a"],{dataSource:e.body}),datetime:this.formatTime(e.updated_at)}))}),_?E.a.createElement(l["a"],{avatar:E.a.createElement(s["a"],{src:y.avatar_url?y.avatar_url:"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png",alt:"Use photo"}),content:this.renderEditor(this.handleChange,this.handleSubmit,f,e)}):null,_?null:E.a.createElement("div",{className:L.a.loginWrap,id:"loginContainer"},E.a.createElement(m["a"],{type:"primary",onClick:()=>{window.location.href="https://github.com/login/oauth/authorize?client_id=Iv1.8fd715c6f01d9c3b&redirect_uri=https://astonishqft.github.io"}},"github\u767b\u5f55"))))}},i=o))||i);t["default"]=w},XlMv:function(e,t,a){"use strict";var n=a("q1tI"),i=a.n(n),o=a("IujW"),s=a.n(o),r=(a("17x9"),a("oSia")),l=a("w2d/"),c=a("dUOs"),m=a("Cuvq"),d=a("DqFP"),u=a("3W8J"),h=a("3cQg"),p=a("lxyc");class g extends n["PureComponent"]{componentDidMount(){r["a"].registerLanguage("jsx",c["a"]),r["a"].registerLanguage("javascript",m["a"]),r["a"].registerLanguage("sass",d["a"]),r["a"].registerLanguage("scss",u["a"]),r["a"].registerLanguage("less",h["a"]),r["a"].registerLanguage("css",p["a"])}render(){var e=this.props,t=e.language,a=e.value;return i.a.createElement("figure",{className:"highlight"},i.a.createElement(r["a"],{language:t,style:l["a"]},a))}}g.defaultProps={language:null};var y=g;a("5MvH"),a("qxIa"),t["a"]=(e=>{var t=e.dataSource;return i.a.createElement(s.a,{escapeHtml:!1,renderers:{code:y},className:"markdown-body",source:t})})},"i+bE":function(e,t,a){e.exports={detail:"detail___xbiEq",append:"append___2tMhN",number:"number___33hlN",loginWrap:"loginWrap___3hoCU"}},qxIa:function(e,t,a){e.exports={"markdown-body":"markdown-body___3ieAj"}}}]);